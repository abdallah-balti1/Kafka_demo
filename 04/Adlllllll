TrÃ¨s bonne question ğŸ‘ â€” câ€™est un cas rÃ©el en asset management :
ğŸ‘‰ le mÃªme prod_cd peut exister sur plusieurs dates de valeur (NAV) ou sur plusieurs contextes de frais (par ex. changement futur, scÃ©nario, historique).

Voici un exemple clair et crÃ©dible avec le mÃªme product code.


---

âœ… Exemple JSON â€“ mÃªme prod_cd, plusieurs lignes

HypothÃ¨se mÃ©tier

MÃªme share class (prod_cd = PROD_CD_001)

MÃªme umbrella & sub-fund

Valeurs ADL diffÃ©rentes selon la date de NAV
â¡ï¸ donc plusieurs lignes dans lâ€™export



---

{
  "meta": {
    "report_name": "ADL Fees Export",
    "generated_at": "2025-08-08T11:00:00Z",
    "currency": "bps",
    "filters": {
      "prod_cd_list": ["PROD_CD_001"]
    }
  },
  "data": [
    {
      "umbrella": {
        "id": "UMB000123",
        "name": "BNP PARIBAS EASY"
      },
      "sub_fund": {
        "id": "SF000987",
        "name": "JPM ESG EMBI GLOBAL DIVERSIFIED COMPOSITE",
        "aladdin_code": "EJGBD",
        "status": "Launched"
      },
      "share_class": {
        "id": "SH000456",
        "prod_cd": "PROD_CD_001",
        "name": "Trac H",
        "isin": "LU0987654321",
        "currency": "EUR",
        "status": "Launched"
      },
      "adl_fees": {
        "context": "CURRENT",
        "max_in_bps": 200,
        "max_out_bps": 200,
        "current_in_bps": 41,
        "current_out_bps": 0,
        "new_in_bps": 62,
        "new_out_bps": 21,
        "effective_nav_valuation_date": "2025-08-08"
      }
    },
    {
      "umbrella": {
        "id": "UMB000123",
        "name": "BNP PARIBAS EASY"
      },
      "sub_fund": {
        "id": "SF000987",
        "name": "JPM ESG EMBI GLOBAL DIVERSIFIED COMPOSITE",
        "aladdin_code": "EJGBD",
        "status": "Launched"
      },
      "share_class": {
        "id": "SH000456",
        "prod_cd": "PROD_CD_001",
        "name": "Trac H",
        "isin": "LU0987654321",
        "currency": "EUR",
        "status": "Launched"
      },
      "adl_fees": {
        "context": "FUTURE",
        "max_in_bps": 200,
        "max_out_bps": 200,
        "current_in_bps": 62,
        "current_out_bps": 21,
        "new_in_bps": 70,
        "new_out_bps": 30,
        "effective_nav_valuation_date": "2025-09-01"
      }
    }
  ]
}


---

ğŸ” Ce qui est important dans cet exemple

âœ… MÃªme prod_cd

"prod_cd": "PROD_CD_001"

â¡ï¸ identifiant fonctionnel identique


---

âœ… DiffÃ©renciation par contexte mÃ©tier

"adl_fees": {
  "context": "CURRENT" | "FUTURE",
  "effective_nav_valuation_date": "YYYY-MM-DD"
}

â¡ï¸ Câ€™est la vraie clÃ© mÃ©tier avec prod_cd
(prod_cd + date + contexte = ligne unique)


---

ğŸ“Š RÃ©sultat logique dans lâ€™Excel

Product code	Share name	Context	Current in	New in	NAV date

PROD_CD_001	Trac H	CURRENT	41	62	08/08/2025
PROD_CD_001	Trac H	FUTURE	62	70	01/09/2025



---

âœ… Pourquoi ce design est bancairement solide

Gestion :

historique

scÃ©narios futurs

validations multiples


Compatible avec :

audits

contrÃ´les rÃ©glementaires

imports Excel ultÃ©rieurs


Aucune ambiguÃ¯tÃ© mÃ©tier



---

âœ… RÃ¨gle dâ€™or Ã  documenter

> ğŸ” Une ligne Excel = (prod_cd, effective_nav_valuation_date, context)



Si tu veux, je peux aussi te proposer :

la clÃ© primaire DB idÃ©ale

le mapping dâ€™update Excel â†’ DB

un schÃ©ma OpenAPI/Swagger propre


Tu es clairement sur une architecture AM robuste ğŸ’¼ğŸ’ª
