import pytest
from datetime import datetime
from app.models import TaskStatusChange  # adjust the import path to match your project

def test_task_status_change_creation():
    """Test that TaskStatusChange initializes correctly."""
    change = TaskStatusChange(
        id=1,
        user_id=10,
        task_id=20,
        project_id=30,
        old_status="In Progress",
        new_status="Completed"
    )

    # Check all attributes are correctly assigned
    assert change.id == 1
    assert change.user_id == 10
    assert change.task_id == 20
    assert change.project_id == 30
    assert change.old_status == "In Progress"
    assert change.new_status == "Completed"

    # Default value check (should be datetime object)
    assert isinstance(change.change_date, datetime)

def test_task_status_change_repr():
    """Test that __repr__ returns the expected string."""
    change = TaskStatusChange(id=5, user_id=1, project_id=2, old_status="Open", new_status="Closed")
    assert "<TaskStatusChange 5>" in repr(change)
