def verify_token(self, token: str):
    try:
        payload = self.security_service.decode_token(token)
        user_id = payload.get("userId")
        if not user_id:
            return None
        user = self.user_service.get_user_by_id(user_id)
        return user
    except Exception:
        return None




def get_user_by_id(self, user_id: str) -> Optional[User]:
    return self.user_repository.get_by_id(user_id)





@abstractmethod
def get_user_by_id(self, user_id: str) -> Optional[User]:
    pass
